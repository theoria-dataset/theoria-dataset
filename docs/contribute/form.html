<!DOCTYPE html>
<html lang="en" class="text-justify latex-dark">
<head>
    <meta charset="utf-8">
    <title>Contribute Entry - TheorIA Dataset</title>
    
    <!-- LaTeX.css dark theme -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/latex.css@1.8.0/style.min.css">
    
    <!-- MathJax for AsciiMath -->
    <script src="../mathjax-config.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js" async></script>
    
    <!-- EmailJS -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="form.css">
    <style>
    .form-section {
        display: block !important;
        margin-bottom: 2rem;
    }
    .guidelines {
        background: #f5f5f5;
        border: 1px solid #ddd;
        border-radius: 4px;
        padding: 1rem;
        margin-bottom: 1rem;
        font-size: 0.9rem;
    }
    .dark .guidelines {
        background: #2a2a2a;
        border-color: #555;
        color: #ccc;
    }
    .submission-instructions {
        background: #e8f4fd;
        border: 1px solid #bee5eb;
        border-radius: 4px;
        padding: 1rem;
        margin-bottom: 1rem;
        color: #0c5460;
    }
    .dark .submission-instructions {
        background: #1a3b42;
        border-color: #2d5a63;
        color: #b3d9e0;
    }
    .reassuring-message {
        background: #f0f8ff;
        border: 2px solid #4a90e2;
        border-radius: 8px;
        padding: 1.5rem;
        margin-bottom: 2rem;
        color: #2c5282;
        text-align: center;
    }
    .dark .reassuring-message {
        background: #1a202c;
        border-color: #4299e1;
        color: #90cdf4;
    }
    .success-message {
        background: #d4edda;
        border: 1px solid #c3e6cb;
        color: #155724;
        padding: 1rem;
        border-radius: 4px;
        margin: 1rem 0;
    }
    .dark .success-message {
        background: #2d5a2d;
        border-color: #4a7c4a;
        color: #a8d4a8;
    }


    /* Assumption items styling */
    .assumption-item {
        position: relative;
        background: rgba(0, 0, 0, 0.02);
        border-left: 3px solid var(--shade-light);
        padding: 1rem;
        margin: 0.5rem 0;
        border-radius: 4px;
    }

    .dark .assumption-item {
        background: rgba(255, 255, 255, 0.04);
    }

    .assumption-item.global {
        border-left-color: var(--primary);
        background: rgba(0, 122, 204, 0.05);
    }

    .dark .assumption-item.global {
        background: rgba(100, 149, 237, 0.1);
    }

    .assumption-item.principle {
        border-left-color: #22c55e;
        background: rgba(34, 197, 94, 0.05);
    }

    .assumption-item.empirical {
        border-left-color: #3b82f6;
        background: rgba(59, 130, 246, 0.05);
    }

    .assumption-item.approximation {
        border-left-color: #8b5cf6;
        background: rgba(139, 92, 246, 0.05);
    }

    .assumption-preview {
        margin-top: 0.5rem;
        font-size: 0.9rem;
        color: var(--text-secondary);
        font-style: italic;
    }

    .assumption-math-preview {
        margin: 0.3rem 0;
        padding: 0.2rem 0.5rem;
        background: rgba(0, 0, 0, 0.05);
        border-radius: 3px;
        font-family: monospace;
        border-left: 2px solid var(--primary);
    }

    .dark .assumption-math-preview {
        background: rgba(255, 255, 255, 0.08);
    }
    </style>
    <!-- Google tag (gtag.js) -->
    <script>
      // Only load Google Analytics on hosted sites (not localhost)
      if (window.location.hostname !== 'localhost' && window.location.hostname !== '127.0.0.1') {
        (function() {
          var script = document.createElement('script');
          script.async = true;
          script.src = 'https://www.googletagmanager.com/gtag/js?id=G-HYLF3HZJXE';
          document.head.appendChild(script);
        })();
        
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-HYLF3HZJXE');
      }
    </script>
</head>

<body>
    <button id="themeToggle" aria-label="Toggle theme">‚òÄÔ∏é</button>

    <!-- Floating Navigation Bar -->
    <nav class="floating-nav">
      <a href="../index.html" class="nav-item" data-page="home">
        <svg class="nav-icon" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
          <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
        <span class="nav-label">Home</span>
      </a>
      <a href="../entries_index.html" class="nav-item" data-page="entries">
        <svg class="nav-icon" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
          <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
        </svg>
        <span class="nav-label">Entries</span>
      </a>
      <a href="../assumptions.html" class="nav-item" data-page="assumptions">
        <svg class="nav-icon" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="3"></circle>
          <path d="M12 1v4M12 19v4M4.22 4.22l2.83 2.83M16.95 16.95l2.83 2.83M1 12h4M19 12h4M4.22 19.78l2.83-2.83M16.95 7.05l2.83-2.83"></path>
        </svg>
        <span class="nav-label">Assumptions</span>
      </a>
      <a href="./" class="nav-item active" data-page="contribute">
        <svg class="nav-icon" viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
          <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
        </svg>
        <span class="nav-label">Contribute</span>
      </a>
      <a href="https://github.com/theoria-dataset/theoria-dataset" class="nav-item" target="_blank">
        <svg class="nav-icon" viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
          <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
        </svg>
        <span class="nav-label">GitHub</span>
      </a>
    </nav>

    <div class="form-container">
        <header>
            <h1 id="page-title">Contribute New Entry</h1>
            <p id="page-description">Create a new theoretical physics entry for the dataset</p>
        </header>

        <div class="reassuring-message">
            <h3>üí° Don't worry about completing every field!</h3>
            <p>This form may look comprehensive, but you only need to fill the essential fields that are relevant to your contribution. Many sections are optional and can help improve your entry's quality, but they're not required for submission. Start with the basics and add more details as you feel comfortable.</p>
        </div>

        <form id="contributionForm">
            
            <!-- Basic Information Section -->
            <div class="form-section">
                <h3>üìù Basic Information</h3>
                <div class="guidelines" data-field="result_id">
                    <strong>Guidelines:</strong> <span class="guideline-text">Unique identifier that must exactly match the filename (without .json extension). Use lowercase letters, numbers, and underscores only. Choose descriptive names that clearly identify the physics concept.</span>
                </div>
                
                <div class="form-group">
                    <label for="result_id">Result ID</label>
                    <input type="text" id="result_id" pattern="^[a-z0-9_]+$">
                    <div class="help-text">Unique identifier that must exactly match the filename (without .json extension). Pattern: lowercase letters, numbers, and underscores only.</div>
                </div>

                <div class="form-group">
                    <label for="result_name">Result Name</label>
                    <input type="text" id="result_name" maxlength="100">
                    <div class="help-text">Brief title to identify the entry (max 100 characters).</div>
                </div>
            </div>

            <!-- Equations Section -->
            <div class="form-section">
                <h3>üßÆ Main Equations</h3>
                <div class="guidelines" data-field="result_equations">
                    <strong>Guidelines:</strong> <span class="guideline-text">List of equations in AsciiMath format. Provide each equation with a unique ID (e.g., 'eq1', 'eq2'). Use AsciiMath format for all equations.</span>
                </div>
                
                <div id="equations_container">
                    <!-- Equations will be populated here -->
                </div>
                <button type="button" class="btn btn-secondary" onclick="addEquation()">+ Add Equation</button>
            </div>

            <!-- Explanation Section -->
            <div class="form-section">
                <h3>üí° Explanation</h3>
                <div class="guidelines" data-field="explanation">
                    <strong>Guidelines:</strong> <span class="guideline-text">Provide a brief (2‚Äì5 sentences, max 100 words) conceptual summary of the theoretical result or equation. Assume the reader has a graduate-level understanding of physics. Use clear and concise language to explain the significance, usage, and context of the theoretical result. Content should include: Definition or main concept, Why it matters in physics, How it's used or where it appears. Avoid derivation steps (covered in the derivation section), dense notation or inline math, empty generalities (e.g., "This is important in physics"), or overly technical jargon. If, exceptionally, there are math symbols or equations included, they must be enclosed in backticks (<code>``</code>) and written in AsciiMath format.</span>
                </div>
                
                <div class="form-group">
                    <label for="explanation">Explanation</label>
                    <textarea id="explanation" rows="4" maxlength="800"></textarea>
                    <div class="help-text">2-5 sentence conceptual summary (‚â§100 words, max 800 characters)</div>
                </div>
            </div>

            <!-- Assumptions Section -->
            <div class="form-section">
                <h3>üìã Assumptions</h3>
                <div class="guidelines">
                    <strong>Guidelines:</strong> Select from standardized global assumptions or add custom assumptions. Global assumptions provide consistent terminology and automatic mathematical expressions.
                </div>

                <div class="form-group">
                    <label>Global Assumptions Browser</label>
                    <select id="global-assumptions-select" onchange="addGlobalAssumption()">
                        <option value="">Select a global assumption to add...</option>
                    </select>
                    <div class="help-text">Choose from 17 standardized physics assumptions</div>
                </div>


                <div id="assumptions_container">
                    <!-- Assumptions will be populated here -->
                </div>
                <button type="button" class="btn btn-secondary" onclick="addCustomAssumption()">+ Add Custom Assumption</button>
            </div>

            <!-- Definitions Section -->
            <div class="form-section">
                <h3>üìñ Symbol Definitions</h3>
                <div class="guidelines">
                    <strong>Guidelines:</strong> Each definition should include a symbol field, with the symbol represented in AsciiMath format and a definition field.. If there are math symbols or equations included in the definition, they must be enclosed in backticks (<code>``</code>) and written in AsciiMath format.
                </div>
                
                <div id="definitions_container">
                    <!-- Definitions will be populated here -->
                </div>
                <button type="button" class="btn btn-secondary" onclick="addDefinition()">+ Add Definition</button>
            </div>

            <!-- Derivation Section -->
            <div class="form-section">
                <h3>üî¨ Derivation</h3>
                <div class="guidelines">
                    <strong>Guidelines:</strong> Provide a formal derivation of the result, including all steps, equations in AsciiMath format, and explanations. Derivation should start from either first principles (listed in the field 'assumptions') or from other results derived in another entry, which should be specified in the 'dependencies' field. Each step should contain the `step` (an integer, in sequential order), `equation` (AsciiMath format), and `explanation` (textual rationale) fields. Include all steps for complete derivation. Use very explicit detail level for easy following.
                </div>
                
                <div id="derivation_container">
                    <!-- Derivation steps will be populated here -->
                </div>
                <button type="button" class="btn btn-secondary" onclick="addDerivationStep()">+ Add Derivation Step</button>
            </div>



            <!-- Programmatic Verification Section -->
            <div class="form-section">
                <h3>üíª Programmatic Verification</h3>
                <div class="guidelines">
                    <strong>Guidelines:</strong> Use minimal dependencies (pure Python or sympy). Should follow the steps of the derivation, explicitly in the comments. Include assert statements to verify correctness
                </div>
                
                <div class="form-group">
                    <label for="prog_language">Language</label>
                    <input type="text" id="prog_language" pattern="^[A-Za-z]+\\s\\d+\\.\\d+\\.\\d+$">
                    <div class="help-text">e.g. 'python 3.11.12'</div>
                </div>

                <div class="form-group">
                    <label for="prog_library">Library</label>
                    <input type="text" id="prog_library" pattern="^[A-Za-z0-9_]+\\s\\d+\\.\\d+\\.\\d+$">
                    <div class="help-text">e.g. 'sympy 1.13.0'</div>
                </div>

                <div class="form-group">
                    <label for="prog_code">Code</label>
                    <textarea id="prog_code" rows="10" style="font-family: monospace;"></textarea>
                    <div class="help-text">Enter each line of code separated by newlines. Include comments and assert statements.</div>
                </div>
            </div>

            <!-- Metadata Section -->
            <div class="form-section">
                <h3>üè∑Ô∏è Metadata & Classification</h3>
                <div class="guidelines">
                    <strong>Guidelines:</strong> Use official arXiv taxonomy identifiers
                </div>
                
                <div class="form-group">
                    <label for="domain">ArXiv Domain</label>
                    <select id="domain">
                        <option value="">Select domain...</option>
                        <option value="quant-ph">Quantum Physics (quant-ph)</option>
                        <option value="gr-qc">General Relativity and Quantum Cosmology (gr-qc)</option>
                        <option value="hep-th">High Energy Physics - Theory (hep-th)</option>
                        <option value="hep-ph">High Energy Physics - Phenomenology (hep-ph)</option>
                        <option value="cond-mat">Condensed Matter (cond-mat)</option>
                        <option value="astro-ph">Astrophysics (astro-ph)</option>
                        <option value="nucl-th">Nuclear Theory (nucl-th)</option>
                        <option value="physics.class-ph">Classical Physics (physics.class-ph)</option>
                        <option value="physics.optics">Optics (physics.optics)</option>
                        <option value="physics.plasm-ph">Plasma Physics (physics.plasm-ph)</option>
                        <option value="math-ph">Mathematical Physics (math-ph)</option>
                    </select>
                    <div class="help-text">ArXiv category identifier</div>
                </div>

                <div class="form-group">
                    <label for="theory_status">Theory Status</label>
                    <select id="theory_status">
                        <option value="">Select status...</option>
                        <option value="current">Current - Modern theory widely accepted</option>
                        <option value="historical">Historical - Important but superseded</option>
                        <option value="approximation">Approximation - Valid simplification</option>
                        <option value="limiting_case">Limiting Case - Restricted applicability</option>
                        <option value="superseded">Superseded - Completely replaced</option>
                    </select>
                    <div class="help-text">Current scientific status of the theory</div>
                </div>
            </div>


            <!-- Dependencies Section -->
            <div class="form-section">
                <h3>üîó Dependencies</h3>
                <div class="guidelines">
                    <strong>Guidelines:</strong> Use exact result_id values (without .json extension). Only include direct dependencies
                </div>
                
                <div id="dependencies_container">
                    <!-- Dependencies will be populated here -->
                </div>
                <button type="button" class="btn btn-secondary" onclick="addDependency()">+ Add Dependency</button>
            </div>

            <!-- Generalized By Section -->
            <div class="form-section">
                <h3>üîÑ Generalized By</h3>
                <div class="guidelines">
                    <strong>Guidelines:</strong> Use exact result_id values (without .json extension). Must reference existing entries in the dataset
                </div>

                <div id="generalized_by_container">
                    <!-- Generalized by entries will be populated here -->
                </div>
                <button type="button" class="btn btn-secondary" onclick="addGeneralizedBy()">+ Add Entry</button>
            </div>

            <!-- Historical Context Section -->
            <div class="form-section">
                <h3>üìú Historical Context</h3>
                <div class="guidelines">
                    <strong>Guidelines:</strong> Provide importance, development period, and key insights
                </div>
                
                <div class="form-group">
                    <label for="historical_importance">Importance</label>
                    <textarea id="historical_importance" rows="3" placeholder="Describe the historical significance and impact..."></textarea>
                    <div class="help-text">Historical significance and impact of this theory</div>
                </div>
                
                <div class="form-group">
                    <label for="development_period">Development Period</label>
                    <input type="text" id="development_period" placeholder="e.g., 1925-1926">
                    <div class="help-text">Time period when this theory was developed</div>
                </div>
                
                <div class="form-group">
                    <label>Key Insights</label>
                    <div class="help-text">Key scientific insights or breakthroughs</div>
                    <div id="key_insights_container">
                        <!-- Key insights will be populated here -->
                    </div>
                    <button type="button" class="btn btn-secondary" onclick="addKeyInsight()">+ Add Insight</button>
                </div>
            </div>

            <!-- References Section -->
            <div class="form-section">
                <h3>üìö References</h3>
                <div class="guidelines">
                    <strong>Guidelines:</strong> Use APA format: Author(s). (Year). Title. Publisher/Journal, volume(issue), pages. DOI/URL
                </div>
                
                <div id="references_container">
                    <!-- References will be populated here -->
                </div>
                <button type="button" class="btn btn-secondary" onclick="addReference()">+ Add Reference</button>
            </div>

            <!-- Change Summary Section (only visible when editing) -->
            <div class="form-section" id="change-summary-section" style="display: none;">
                <h3>üìù Change Summary</h3>
                <div class="guidelines">
                    <strong>Required for modifications:</strong> Please describe what you changed and why. This helps reviewers understand your improvements.
                </div>
                
                <div class="form-group">
                    <label for="change-summary">What did you change? *</label>
                    <textarea id="change-summary" rows="3" placeholder="e.g., Fixed typo in equation 2, Added missing derivation step, Corrected reference format..." required></textarea>
                    <div class="help-text">Brief summary of your modifications</div>
                </div>
                
                <div class="form-group">
                    <label for="change-reason">Why was this change needed? *</label>
                    <textarea id="change-reason" rows="3" placeholder="e.g., Original equation had incorrect sign, Derivation was missing crucial step, Reference was incomplete..." required></textarea>
                    <div class="help-text">Explain the reasoning behind your changes</div>
                </div>
            </div>

            <!-- Attribution Section -->
            <div class="form-section">
                <h3>üë§ Attribution</h3>
                <div class="guidelines">
                    <strong>Guidelines:</strong> Each contributor must have a full name and an identifier (ORCID, website, LinkedIn, etc.)
                </div>
                
                <div id="contributors_container">
                    <!-- Contributors will be populated here -->
                </div>
                <button type="button" class="btn btn-secondary" onclick="addContributor()">+ Add Contributor</button>
                
                <div class="form-group">
                    <label for="contributor-email">Your Email (optional)</label>
                    <input type="email" id="contributor-email" placeholder="your.email@example.com">
                    <div class="help-text">If provided, you'll receive a confirmation email with next steps</div>
                </div>

                <div class="form-group">
                    <label for="review_status">Review Status</label>
                    <select id="review_status">
                        <option value="draft">Draft - Initial submission</option>
                        <option value="reviewed">Reviewed - Final dataset entry</option>
                    </select>
                    <div class="help-text">Use "draft" for initial submissions</div>
                </div>
            </div>

            <!-- Review Section -->
            <div class="form-section">
                <h3>üìã Review & Export</h3>
                
                <div class="form-group">
                    <h4>Submit Your Entry</h4>
                    <button type="button" class="btn btn-primary" onclick="createEmailSubmission()" style="background: #4a90e2; font-size: 1.1em; padding: 12px 24px;">üìß Submit Entry</button>
                    <div class="help-text" style="margin-top: 0.5rem;">This will automatically send your entry to the TheorIA team for review</div>
                </div>

                <div class="form-group" style="margin-top: 2rem;">
                    <h4>Additional Options</h4>
                    <button type="button" class="btn btn-secondary" onclick="exportToJSON()">üìÑ Download JSON</button>
                    <button type="button" class="btn btn-secondary" onclick="togglePreview()">üëÅÔ∏è Preview Entry</button>
                    <button type="button" class="btn btn-secondary" onclick="copyToClipboard()">üìã Copy to Clipboard</button>
                </div>

                <!-- Hidden Preview Section -->
                <div id="preview-section" style="display: none; margin-top: 1rem;">
                    <div class="preview-section">
                        <div class="preview-title">Entry Preview</div>
                        <div id="full-preview"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" id="agreement">
                        I confirm that this entry follows the <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank">CC-BY 4.0 open source license</a> and the <a href="../../CONTRIBUTING.md" target="_blank">dataset guidelines</a>
                    </label>
                </div>
            </div>

        </form>
    </div>

    <script src="../script.js" defer></script>
    <script src="form.js" defer></script>
    
    
</body>
</html>